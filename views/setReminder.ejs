<%- include('partials/header', { title: 'Set reminder' }) %>

<div class="page-head">
  <div>
    <h1 class="h1">Set reminder</h1>
    <p class="muted">List: <strong><%= listname %></strong></p>
  </div>
  <div class="page-actions">
    <a class="btn btn-ghost" href="/home">Dashboard</a>
  </div>
</div>

<div class="card">
  <div class="card-body">
    <form id="reminderForm" class="form" action="/list/set-reminder" method="POST">
      <input type="hidden" name="listname" value="<%= listname %>" />

      <div class="field">
        <label class="label" for="message">Message (optional)</label>
        <input class="input" id="message" type="text" name="message" placeholder="Add a note or reference" />
      </div>

      <div class="field">
        <label class="label" for="email">Email</label>
        <input class="input" type="email" name="email" id="email" required placeholder="Your email" />
      </div>

      <div class="form-row">
        <div class="field">
          <label class="label" for="date">Date</label>
          <input class="input" id="date" type="date" name="date" required />
        </div>
        <div class="field">
          <label class="label" for="time">Time</label>
          <input class="input" id="time" type="time" name="time" required />
        </div>
      </div>

      <button class="btn btn-primary" type="submit">Save reminder</button>
    </form>
  </div>
</div>

<!-- Prevent past date/time -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("reminderForm");
    const dateInput = document.querySelector("input[name='date']");
    const timeInput = document.querySelector("input[name='time']");
    if (!form || !dateInput || !timeInput) return;

    form.addEventListener("submit", (e) => {
      const date = dateInput.value;
      const time = timeInput.value;
      if (!date || !time) return;

      const chosen = new Date(`${date} ${time}`);
      const now = new Date();
      if (chosen <= now) {
        e.preventDefault();
        alert("You cannot set a reminder in the past. Please choose a future date and time.");
      }
    });
  });
</script>

<%- include('partials/footer') %>
