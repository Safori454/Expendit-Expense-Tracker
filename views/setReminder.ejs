<!DOCTYPE html>
<html>
<head>
    <title>Set Reminder for <%= listname %></title>
</head>
<body>
    <h2>Set Reminder for "<%= listname %>"</h2>

    <form id="reminderForm" action="/list/set-reminder" method="POST">
        <input type="hidden" name="listname" value="<%= listname %>">

        <label>Message / Note (optional):</label><br>
        <input type="text" name="message" placeholder="Add a note or reference"><br><br>

        <label>Date:</label><br>
        <input type="date" name="date" required><br><br>

        <label>Time:</label><br>
        <input type="time" name="time" required><br><br>

        <label for="email">Email:</label>
        <input type="email" name="email" id="email" required placeholder="Your email"><br><br>

        <button type="submit">Save Reminder</button>
    </form>

    <br>
    <form action="/home" method="GET" style="display:inline;">
        <button type="submit">Home</button>
    </form>

    <!-- ✅ Prevent past date/time -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const form = document.getElementById("reminderForm");
            const dateInput = document.querySelector("input[name='date']");
            const timeInput = document.querySelector("input[name='time']");

            form.addEventListener("submit", (e) => {
                const date = dateInput.value;
                const time = timeInput.value;

                if (!date || !time) {
                    alert("Please choose both date and time.");
                    e.preventDefault();
                    return;
                }

                const chosen = new Date(`${date} ${time}`);
                const now = new Date();

                if (chosen <= now) {
                    e.preventDefault();
                    alert("❗ You cannot set a reminder in the past.\nPlease choose a future date and time.");
                }
            });
        });
    </script>

</body>
</html>
