<!DOCTYPE html>
<html>
<head>
    <title>Create New Reminder</title>
</head>
<body>

    <h2>Create New Reminder</h2>

    <form id="newReminderForm" action="/reminders/new" method="POST">

        <label>Select List:</label><br>
        <select name="list_id" required>
            <% lists.forEach(list => { %>
                <option value="<%= list.id %>"><%= list.listname %></option>
            <% }) %>
        </select><br><br>

        <label>Message / Note (optional):</label><br>
        <input type="text" name="message" placeholder="Add a note or reference"><br><br>

        <label for="email">Email:</label>
    <input type="email" name="email" id="email" required placeholder="Your email"><br><br>

        <label>Date:</label><br>
        <input type="date" name="date" required><br><br>

        <label>Time:</label><br>
        <input type="time" name="time" required><br><br>

        <button type="submit">Create Reminder</button>
    </form>

    <br>
    <form action="/home" method="GET">
        <button type="submit">Home</button>
    </form>

    <!-- ✅ Prevent past date/time -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const form = document.getElementById("newReminderForm");
            const dateInput = document.querySelector("input[name='date']");
            const timeInput = document.querySelector("input[name='time']");

            form.addEventListener("submit", (e) => {
                const date = dateInput.value;
                const time = timeInput.value;

                if (!date || !time) {
                    alert("Please choose both date and time.");
                    e.preventDefault();
                    return;
                }

                const chosen = new Date(`${date} ${time}`);
                const now = new Date();

                if (chosen <= now) {
                    e.preventDefault();
                    alert("❗ You cannot set a reminder in the past.\nPlease choose a future date and time.");
                }
            });
        });
    </script>

</body>
</html>
